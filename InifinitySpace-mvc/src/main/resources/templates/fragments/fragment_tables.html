<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="headerfiles">
    <meta charset="UTF-8"/>

</head>
<body>
<div th:fragment="tabla_directorio">
    <h2>Directorio [[${ruta}]]</h2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Ruta</th>
            <th scope="row">MB</th>
            <th scope="row">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="file : ${files}">
            <td th:text="${file.Id}"></td>
            <!--Si es directorio, combierte en hipervinculo-->
            <td th:if="${file.file.isDirectory()}">
                <a th:href="@{/changedir(directory=${file.Id})}">
                    <i class="fas fa-folder-open"></i><span th:text="${file?.display}"></span>
                </a>
            </td>
            <td th:if="${!file.file.isDirectory()}" >
                <i th:if="${file.isVideo()}" class="far fa-file-video"></i>
                <i th:if="${file.isImage()}"class="far fa-file-image"></i>
                <i th:if="${file.isAudio()}"class="far fa-file-audio"></i>
                <i th:if="${file.isUnknown()}"class="far fa-question-circle"></i>
                <span th:text="${file?.display}"></span>
            </td>

            <!-- Si es directorio no pongas nada-->
            <td th:if="${file.file.isDirectory()}"></td>
            <td th:if="${!file.file.isDirectory()}"
                th:text="${#numbers.formatDecimal(file.getMB(),1,'POINT',2,'COMMA')}"></td>

            <!--<td th:text="${file.getMB()}"></td>-->
            <td>
                <!-- <a th:if="${file.file.isDirectory()}" th:href="@{/changedir(directory=${file.Id})}">Abrir</a>-->
                <!-- <a th:href="@{/fichero/splitAndStore/{id}(id=${file.Id})}">SplitAndStore</a> -->
                <a th:href="@{/fichero/splitAndStoreMAX/{id}(id=${file.Id})}">Upload</a>

            </td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="tabla_ficheros">
    <H2>Ficheros</H2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Nombre</th>
            <th scope="row">Ext.</th>
            <th scope="row">Tamano</th>
            <th scope="row">Fecha</th>
            <th scope="row">Partes</th>
            <th scope="row">Subido</th>
            <th scope="row">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="fichero : ${ficheros}">
            <td th:text="${fichero?.Id}">id</td>
            <td th:text="${fichero?.nombre}">name</td>
            <td th:text="${fichero?.extension}">extension</td>
            <td th:text="${fichero?.bytes}">bytes</td>

            <td
                    th:text="${#dates.format(fichero?.fechaCreacion,'dd/MM/yyyy HH:mm')}">fechaCreacion
            </td>
            <td th:text="${fichero?.partes}">Partes</td>
            <td th:text="${fichero?.uploaded}">Partes</td>
            <td><a th:href="@{/fichero/{id}(id=${fichero.Id})}">Detail</a>
                / <a th:href="@{/fichero/delete/{id}(id=${fichero.Id})}">Delete</a>
                /<a th:href="@{/fichero/upload/{id}(id=${fichero.Id})}">Upload</a>
                / <a th:href="@{/fichero/download/{id}(id=${fichero.Id})}">Download</a>
                / <a th:href="@{/fichero/downloadThread/{id}(id=${fichero.Id})}">Download mAx</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="tabla_map_entry">
    <H2>Ficheros</H2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Parte</th>
            <th scope="row">Media Id</th>
            <th scope="row">Url</th>

        </tr>
        </thead>
        <tbody>
        <tr th:each="parte : ${partes}">
            <td th:text="${parte?.Id}">id</td>
            <td th:text="${parte?.parte}">Parte</td>
            <td th:text="${parte?.mediaId}">Media Id</td>
            <td th:text="${parte?.url}">url</td>


        </tr>
        </tbody>
    </table>
</div>


<div th:fragment="tabla_peliculas">
    <h2>Tabla de Peliculas</h2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Nombre</th>
            <th scope="row">Fichero</th>
            <th scope="row">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="pelicula : ${peliculas}">
            <td th:text="${pelicula.Id}"></td>
            <td th:text="${pelicula.nombre}"></td>
            <td th:text="${pelicula?.fichero?.Id}"></td>
            <td><a th:href="@{/pelicula/delete/{id}(id=${pelicula.Id})}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="tabla_series">
    <h2>Tabla de Peliculas</h2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Nombre</th>
            <th scope="row">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="serie : ${series}">
            <td th:text="${serie.Id}"></td>
            <td th:text="${serie.nombre}"></td>
            <td><a th:href="@{/serie/delete/{id}(id=${serie.Id})}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="tabla_episodios">
    <h2>Tabla de Episodios</h2>
    <table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="row">Id</th>
            <th scope="row">Nombre</th>
            <th scope="row">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="episodio : ${episodios}">
            <td th:text="${episodio.Id}"></td>
            <td th:text="${episodio.nombre}"></td>
            <td><a th:href="@{/episodio/delete/{id}(id=${episodio.Id})}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>


<p>Go to the next page to see fragments in action</p>
<aside>
    <div>This is a sidebar</div>
</aside>
<div class="another">This is another sidebar</div>
<footer th:fragment="footer">
    <p>Esto es el footer</p>
</footer>
</body>
</html>